<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="boot.sagu.mapper.RegionMapper">

   <insert id="insertRegion" parameterType="boot.sagu.dto.RegionDto">
      INSERT INTO regions VALUES (null,#{province},#{city},#{district},#{town},#{latitude},#{longitude})
   </insert>
   
    <select id="findRegionsByKeyword" resultType="boot.sagu.dto.RegionDto">
        SELECT * FROM regions
        WHERE 
            (province IS NOT NULL AND province LIKE CONCAT('%', #{keyword}, '%')) OR
            (city IS NOT NULL AND city LIKE CONCAT('%', #{keyword}, '%')) OR
            (district IS NOT NULL AND district LIKE CONCAT('%', #{keyword}, '%')) OR
            (town IS NOT NULL AND town LIKE CONCAT('%', #{keyword}, '%'))
        LIMIT 10
    </select>
   
</mapper>